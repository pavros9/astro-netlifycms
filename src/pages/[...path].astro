---
import Layout from "../layouts/Layout.astro";
import { pageData } from "@utils/pageData.ts";
import { Debug } from 'astro/components';
import { HeaderTemplate } from "src/components/ReactComponents/HeaderTemplate/HeaderTemplate";

export async function getStaticPaths() {
  let pages = [];
  try {
    pages = await Astro.glob("../../content/pages/**/*.md");

  }finally {
    return pages.map((page) => {
    
      let path = page?.url?.slice(1);
      path = path.replace('/_index', '')

      if (path === "main") {
        path = undefined;
      }
      console.log(path)
      return {
          params: {
            path: path,
          },
          props: page,
        };
    });
    }
  }
  
// console.log("url + " +  Astro.props.url)
const data = await pageData(Astro.props.url.slice(1));

---

<Layout {...data}>
	<HeaderTemplate navigation={data?.site?.primaryNav}/>
	<h2 class="page">{data?.titleHead}</h2>
  <Debug {data}/>
</Layout>
